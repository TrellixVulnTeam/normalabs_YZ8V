<!DOCTYPE html>
<html lang="pt-BR" class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contra Cheque - Normatel</title>
  <meta name="description" content="Portal de login e funcionalidades para coloboradores do Grupo Normatel">
  <!-- Favicon -->
  <link rel="shortcut icon" href="/assets/imgs/favicon.ico" />

  <script src="https://kit.fontawesome.com/733152d79f.js" crossorigin="anonymous"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/bulma.css" />
  <!-- JQuery -->
  <script src="/assets/js/jquery-3.6.0.min.js"></script>

  <!-- Função de logout -->
  <script src="./assets/js/logout.js"></script>
</head>

<body>
  <!-- Loader -->
  <div id="loader-portal">
    <figure class="image is-128x128">
      <img class="is-rounded loader-img" src="/assets/imgs/logo.png" alt="Logo Grupo Normatel">
    </figure>
  </div>
  <!---/--->

  <section id="pg-body">

    <!-- Nav Menu -->
    <div id="menu">
      <nav class="navbar is-fixed-top is-white" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
          <div class="navbar-item" href="/index.html">
            <img src="/assets/imgs/logo.png" height="28" class="loader-img">
          </div>

          <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false"
            data-target="navbarBasicExample">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>
        </div>

        <div id="navbarBasicExample" class="navbar-menu">
          <div class="navbar-start">
            <a class="navbar-item" href="./portal">
              Home
            </a>
            <a class="navbar-item">
              Contra Cheque
            </a>
            <a class="navbar-item">
              Crachá
            </a>
            <a class="navbar-item">
              Service Desk
            </a>
            <a class="navbar-item">
              Configurações
            </a>
          </div>
          <div class="navbar-end">
            <div class="navbar-item" onclick="logout()">
              Logout
            </div>
          </div>
        </div>
      </nav>
    </div>

    <section class="hero is-small">
      <div class="hero-body">
        <p class="title">
          Contra Cheque
        </p>
      </div>
    </section>


   

    <section class="section" id="contracheque">
      <h2 class="subtitle" id="titulo-contracheque">
      </h2>
    </section>
    <section class="section">
      <table style="width:100%; background-color: #D9D9D9;" >
        <tr>
          <th>Funcionário</th>
          <th>Setor</th>
          <th>Cargo</th>
        </tr>
        <tr>
          <td id="dadoFuncionario"></td>
          <td id="dadoSetor"></td>
          <td id="dadoCargo"></td>
        </tr>
      </table>
    </br>
    <table style="width:100%; background-color: #D9D9D9;" >
      <tr>
        <th>Descrição</th>
        <th>Valor</th>
      </tr>
      <tr>
        <td>Pagamento mensal</td>
        <td id="dadoValor"></td>
      </tr>
    </table>
  </br>

    <div class="columns is-centered">
      <div class="column is-half">
<button class="button is-normal no-print" id="login-btn" onclick="window.print();">Gerar PDF</button>
        <div style="margin: 25px;"></div>
<button class="button is-normal no-print" id="login-btn" onclick="window.location.replace('./portal.html')">Voltar</button>
</div>
</div>
</div>
    
    </section>



  <footer class="footer no-print">
    <div class="content has-text-centered">
      <p><a href="https://www.linkedin.com/company/normalabs-td/?originalSubdomain=br" target="_blank"><img
            src="/assets/imgs/normalabs-icon.png" alt="Ícone de um foguete - Logo do NormaLabs"
            class="normalabs-footer"></a></p>
      <p>
        Desenvolvido por <a href="https://mardesonh.github.io/portfolio/" target="_blank">Mardeson Herculano</a></p>

    </div>
  </footer>

  <script>
    const meses = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];
    const d = new Date();
    let mesatual = meses[d.getMonth()];

    var dadosUser = localStorage.getItem("dadosUser");

    if (dadosUser.length == 0){
      window.location.replace('./index.html');
    }
    else {
    //console.log(dadosUser);
    dadosUser = JSON.parse(dadosUser);
    //console.log(dadosUser[0].setor);


    //Mudar BG do load baseado no setor do funcionário logado
    let setor = dadosUser[0].setor;
    //NormaLabs -> Laranja
    //Engenharia -> Verde
    //Home Center -> Laranja
    //Incorporações -> Azul
    switch (setor) {
      case 'NormaLabs':
        $('#loader-portal').css('background-image', 'linear-gradient(315deg, #ff4e00 0%, #ec9f05 74%)');
        $('.navbar').css('background-image', 'linear-gradient(315deg, #ff4e00 0%, #ec9f05 74%)');
        $('.loader-img').attr('src', '/assets/imgs/normalabs-icon-white.png');
        break;
      case 'Home Center':
        $('#loader-portal').css('background-image', 'linear-gradient(315deg, #ff4e00 0%, #ec9f05 74%)');
        $('.navbar').css('background-image', 'linear-gradient(315deg, #ff4e00 0%, #ec9f05 74%)');
        $('.loader-img').attr('src', '/assets/imgs/logo.png');
        break;
      case 'Engenharia':
        $('#loader-portal').css('background-image', 'linear-gradient(315deg, #3bb78f 0%, #0bab64 74%)');
        $('.navbar').css('background-image', 'linear-gradient(315deg, #3bb78f 0%, #0bab64 74%)');
        $('.loader-img').attr('src', '/assets/imgs/logo.png');
        break;
      case 'Incorporações':
        $('#loader-portal').css('background-image', 'linear-gradient(315deg, #2a2a72 0%, #009ffd 74%)');
        $('.navbar').css('background-image', 'linear-gradient(315deg, #2a2a72 0%, #009ffd 74%)');
        $('.loader-img').attr('src', '/assets/imgs/logo.png');
        break;
    }


    //Esconder o menu nav e footer ao iniciar a página
    $('html').attr('class', ''); //"Limpa" a classe no html, para permitir esconder o top menu 
    $('#pg-body').hide();
    $('.footer').hide();
    //SetTimeOut para, após o tempo pré determinado, esconder o loader da tela e exibir o conteúdo
    const loader = setTimeout(() => {
      $('html').attr('class', 'has-navbar-fixed-top'); //Atribui a classe "has-navbar-fixed-top" para que o menu fique responsivo
      $('#loader-portal').hide();
      $('#pg-body').show();
      $('.footer').show();
    }, 1500);


    const prefersColorScheme = window.matchMedia('(prefers-color-scheme: dark)');
    //Configurar esquema de cores e imagens caso o dispositivo esteja no modo escuro
    function changeTheme(event) {
      if (event.matches) {
        //Eventos caso o dispositivo esteja no modo escuro
        //console.log('Modo Escuro');
        $('.normalabs-footer').attr('src', 'assets/imgs/normalabs-icon-dark.png');
        $('#loader-portal').css('background-image', 'linear-gradient(315deg, #000 0%, #000 0%)');
      } else {
        //console.log('Modo Claro');
        $('.normalabs-footer').attr('src', 'assets/imgs/normalabs-icon.png');
      }
    }
    // Escuta a mudança de tema no sistema
    prefersColorScheme.addListener(changeTheme);
    // Altera o tema conforme o tema do usuário
    changeTheme(prefersColorScheme);

    //Hamburguer Menu (Carregado do BULMA)
    document.addEventListener('DOMContentLoaded', () => {
      // Get all "navbar-burger" elements
      const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
      // Add a click event on each of them
      $navbarBurgers.forEach(el => {
        el.addEventListener('click', () => {
          // Get the target from the "data-target" attribute
          const target = el.dataset.target;
          const $target = document.getElementById(target);
          // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
          el.classList.toggle('is-active');
          $target.classList.toggle('is-active');

        });
      });
    });

    $('#titulo-contracheque').text('Contra-cheque de ' + dadosUser[0].user + ', referente ao mês de ' + mesatual + '.');
    $('#dadoFuncionario').text(dadosUser[0].user);
    $('#dadoSetor').text(dadosUser[0].setor);
    $('#dadoCargo').text(dadosUser[0].cargo);

     switch (dadosUser[0].cargo){
      case 'Estagiário' :
      $('#dadoValor').text('R$800');
      break;
      case 'Júnior' :
      $('#dadoValor').text('R$1000');
      break;
      case 'Pleno' :
      $('#dadoValor').text('R$3000');
      break;
      case 'Sênior' :
      $('#dadoValor').text('R$5000');
      break;

    }; 


  };
  </script>
</body>

</html>